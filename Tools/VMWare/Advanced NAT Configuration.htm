<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0068)http://www.vmware.com/support/gsx3/doc/network_nat_advanced_gsx.html -->
<!-- VMware asp file for "normal" conversions (chapters from FrameMaker) --><!-- This template is used for FrameMaker to Web docs. --><!-- This file generated on: Monday, July 25, 2005 14:36:11 --><!--  begin page-specific content  --><!-- The next block is the HTML document, as generated by WebWorks --><!--     Modified for 6/3/2005 Web redesign by pete --><!-- The charset is set by $CHARSET in WebWorks; to change to --><!-- a different character set, change the Charset option --><!-- in the project file, on the Options tab - Kam, 5/7/2002 --><!-- This comes from the "NewHTMLPage" style in WebWorks publisher --><!-- See also the "Title" style in the WebWorks publisher --><!-- style designer. --><HTML><HEAD><TITLE>Advanced NAT Configuration</TITLE>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<META content=all name=robots>
<META content=VMware name=copyright>
<META http-equiv=content-language content=en>
<META 
content="VMware is the global leader in virtualization software, providing desktop and server virtualization products for virtual infrastructure solutions." 
name=description>
<META 
content="virtualization, virtualisation, virtual machine, community source, hypervisor, workstation, esx, gsx, virtualcenter, virtual server, p2v, vmtn, converter, fusion, virtualize mac, virtual appliances, vm, vm ware, free virtualization" 
name=keywords>
<META content="VMware, Inc. All rights reserved." name=copyright>
<META content=noodp name=robots>
<META content=index,follow name=robots><LINK 
href="http://vmware.simplefeed.net/rss" type=application/rss+xml 
rel=alternate><LINK href="//www.vmware.com/favicon.ico" type=image/x-icon 
rel="shortcut icon"><LINK href="Advanced NAT Configuration_files/template.css" 
type=text/css rel=stylesheet><LINK 
href="Advanced NAT Configuration_files/fce.css" type=text/css 
rel=stylesheet><LINK href="Advanced NAT Configuration_files/techpubs.css" 
type=text/css rel=stylesheet><LINK media=print 
href="Advanced NAT Configuration_files/print.css" type=text/css rel=stylesheet>
<SCRIPT src="Advanced NAT Configuration_files/library.js" 
type=text/javascript></SCRIPT>

<META content="MSHTML 6.00.2900.5803" name=GENERATOR></HEAD>
<BODY>
<DIV id=container><STRONG class=seo>VMware</STRONG> 
<DIV id=content-container>
<DIV id=content-left>
<DIV id=header></DIV>
<DIV id=content>
<TABLE id=main-table cellSpacing=0 cellPadding=0>
  <TBODY>
  <TR>
    <TD id=main-body>
      <H1>VMware GSX Server 3.2</H1><BR>
      <P><A href="http://www.vmware.com/products/server/">Features</A> | <A 
      href="http://www.vmware.com/support/pubs/gsx_pubs.html">Documentation</A> 
      | <A 
      href="http://www.vmware.com/support/kb/enduser/std_alp.php?p_sid=Fph1bnoh&amp;p_lva=&amp;p_li=&amp;p_page=1&amp;p_prod_lvl1=9&amp;p_prod_lvl2=%7Eany%7E&amp;p_cat_lvl1=%7Eany%7E&amp;p_cat_lvl2=%7Eany%7E&amp;p_search_text=&amp;p_new_search=1&amp;p_search_type=7&amp;p_sort_by=dflt">Knowledge 
      Base</A> | <A href="http://www.vmware.com/community/forum.jspa?forumID=20" 
      target=blank>Discussion Forums</A> </P>
      <P></P><!-- Top Navigation to Previous, Contents, Last, and Next pages --><!-- See also Normal.asp -->
      <P><B><A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_extaccess_gsx.html"><IMG 
      height=10 alt=previous 
      src="Advanced NAT Configuration_files/goleft_10.gif" width=10 
      border=0></A>&nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_extaccess_gsx.html">Prev</A>&nbsp; 
      &nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/index_vm.html">Contents</A>&nbsp; 
      &nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/glossary_vm_gsx.html">Last</A>&nbsp; 
      &nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_custom_gsx.html">Next</A>&nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_custom_gsx.html"><IMG 
      height=10 alt=next src="Advanced NAT Configuration_files/goright_10.gif" 
      width=10 border=0></A></B></P><A name=wp1027150></A>
      <H2>Advanced NAT Configuration </H2><A name=wp1098156></A>
      <P>Read the section that corresponds to your host operating system for 
      information on configuring NAT for your virtual machines. </P><A 
      name=wp1049129></A>
      <H3><B>Windows Hosts</B> </H3><A name=wp1098162></A>
      <P>Configure the NAT device using the Virtual Network Editor (<B>Host</B> 
      &gt; <B>Virtual Network Settings</B> &gt; <B>NAT</B>). </P><A 
      name=wp1051824></A>
      <P style="MARGIN-LEFT: 0pt; TEXT-INDENT: 19pt"><A 
      title="Link to w_net_ed_nat.png" 
      href="http://www.vmware.com/support/gsx3/doc/img/w_net_ed_nat.png"><IMG 
      id=wp1051822 height=165 alt="Link to w_net_ed_nat.png" 
      src="Advanced NAT Configuration_files/w_net_ed_nat_t.png" width=206 
      border=0></A> </P><A name=wp1049127></A>
      <P>You can stop, restart and start the virtual NAT device by clicking the 
      appropriate button. The <B>VMnet host</B> setting lets you choose which 
      virtual network uses the NAT device. You can select <B>Disable</B> if you 
      do not want to use NAT on any virtual network. </P><A name=wp1051852></A>
      <P>To edit NAT settings for a virtual network, choose it from the 
      drop-down menu, then click <B>Edit</B>. The NAT Settings dialog box 
      appears. </P><A name=wp1077441></A>
      <P style="MARGIN-LEFT: 0pt; TEXT-INDENT: 19pt"><A 
      title="Link to w_net_ed_natset_gsx.png" 
      href="http://www.vmware.com/support/gsx3/doc/img/w_net_ed_natset_gsx.png"><IMG 
      id=wp1077435 height=117 alt="Link to w_net_ed_natset_gsx.png" 
      src="Advanced NAT Configuration_files/w_net_ed_natset_gsx_t.png" width=198 
      border=0></A> </P><A name=wp1077442></A>
      <P>You can change any of the following NAT settings: </P><A 
      name=wp1098177></A>
      <DIV style="MARGIN-TOP: 0pt; MARGIN-BOTTOM: 4pt; MARGIN-LEFT: 19pt">
      <LI><B>Port forwarding</B> lets you send incoming TCP or UDP requests to a 
      specific virtual machine on the virtual network served by the NAT device. 
      To set up and configure forwarded ports, click <B>Port forwarding</B>. A 
      dialog box appears. </LI></DIV><A name=wp1098179></A>
      <P style="MARGIN-LEFT: 19pt">To add a new port for either TCP or UDP, 
      click <B>Add</B>. If a port is already listed, you can change its 
      settings. Select its name in the list, then click <B>Properties</B>. Or 
      click <B>Remove</B> to remove the selected port. </P><A 
name=wp1098181></A>
      <P style="MARGIN-LEFT: 19pt">When you click <B>Add</B>, another dialog box 
      appears. In the <B>Host port</B> field, type the number of the incoming 
      TCP or UDP port. For example, incoming HTTP requests are usually on port 
      80. In the first <B>Forwarding IP address</B> field, type the IP address 
      of the virtual machine to which you want to forward the incoming requests. 
      In the second field on that line, type the port number you want to use for 
      those requests on that virtual machine. This may be the standard port, 
      such as 80 for HTTP, or a nonstandard port if software running in the 
      virtual machine is configured to accept requests on a nonstandard port. 
      The <B>Description</B> field is optional. You may use it to identify the 
      service being forwarded (for example, HTTP). When you have made these 
      settings, click <B>OK</B>. </P><A name=wp1098183></A>
      <DIV style="MARGIN-TOP: 0pt; MARGIN-BOTTOM: 4pt; MARGIN-LEFT: 19pt">
      <LI>You may specify DNS servers to be used by the virtual NAT device. To 
      do so, click <B>DNS</B>. A dialog box appears. You can change the 
      <B>Policy</B> for using multiple DNS servers if you prefer to use 
      <B>Rotate</B> or <B>Burst</B> instead of the default setting of 
      <B>Order</B>. To add a DNS server to the list, click <B>Add</B>. Another 
      dialog box appears. Enter the DNS server's IP address in the <B>IP 
      address</B> field. The <B>Description</B> field is optional. When you have 
      made the desired settings, click <B>OK</B>.To change the settings for a 
      server already in the list, select its entry in the DNS dialog box, then 
      click <B>Properties</B>. To delete an entry, select the entry, then click 
      <B>Remove</B>. When you have made the desired changes, click <B>OK</B>. 
      </LI></DIV><A name=wp1098185></A>
      <DIV style="MARGIN-TOP: 0pt; MARGIN-BOTTOM: 4pt; MARGIN-LEFT: 19pt">
      <LI>You can change the IP address for the NAT device in the <B>Gateway IP 
      address</B> field. If you need to change the Netmask, click the <B>...</B> 
      button on the <B>Host Virtual Network Mapping</B> tab of the Virtual 
      Network Editor and choose <B>Subnet</B>. </LI></DIV><A name=wp1098353></A>
      <DIV style="MARGIN-TOP: 0pt; MARGIN-BOTTOM: 4pt; MARGIN-LEFT: 19pt">
      <LI>If you want to allow only passive mode FTP over the NAT device, 
      deselect <B>the Active FTP</B> check box. </LI></DIV><A 
name=wp1098357></A>
      <DIV style="MARGIN-TOP: 0pt; MARGIN-BOTTOM: 4pt; MARGIN-LEFT: 19pt">
      <LI>You can change the number of minutes to keep the UDP mapping for the 
      NAT in the <B>UDP timeout</B> field. </LI></DIV><A name=wp1098361></A>
      <DIV style="MARGIN-TOP: 0pt; MARGIN-BOTTOM: 4pt; MARGIN-LEFT: 19pt">
      <LI>If you change the OUI (Organizationally Unique Identifier) portion of 
      the MAC address for the virtual machine and subsequently cannot use NAT 
      with the virtual machine, you should check the <B>Allow Any OUI</B> check 
      box. </LI></DIV><A name=wp1098375></A>
      <DIV style="MARGIN-TOP: 0pt; MARGIN-BOTTOM: 4pt; MARGIN-LEFT: 19pt">
      <LI>In the <B>Config port</B> field, you can specify a port that can be 
      used to access status information about the NAT. This option is used for 
      troubleshooting purposes with VMware technical support only. </LI></DIV><A 
      name=wp1098385></A>
      <DIV style="MARGIN-TOP: 0pt; MARGIN-BOTTOM: 4pt; MARGIN-LEFT: 19pt">
      <LI>You can change NetBIOS timeout and retry settings. </LI></DIV><A 
      name=wp1098187></A>
      <P>When you have made all the networking changes you want, click 
      <B>OK</B>. </P><A name=wp1051839></A>
      <H3><B>Linux Hosts</B> </H3><A name=wp1098166></A>
      <P>Use the NAT configuration file on the host to configure the NAT device. 
      This file is <TT>/etc/vmware/vmnet8/nat/nat.conf</TT>. </P><A 
      name=wp1027157></A>
      <P>The configuration file is divided into sections. Each section 
      configures a part of the NAT device. Text surrounded by square brackets — 
      such as <TT>[host]</TT> — marks the beginning of a section. In each 
      section is a configuration parameter that can be set. The configuration 
      parameters take the form <TT>ip = 192.168.27.1/24</TT>. </P><A 
      name=wp1027163></A>
      <P>For an example of a NAT configuration file, see <A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_conf_gsx.html">Sample 
      Linux vmnetnat.conf File</A>. The configuration file variables are 
      described below. </P><A name=wp1027166></A>
      <H3>The [host] Section </H3><A name=wp1027168></A>
      <P><TT>ip</TT> <BR>The IP address that the NAT device should use. It can 
      optionally be followed by a slash and the number of bits in the subnet. 
      </P><A name=wp1027171></A>
      <P><TT>netmask<BR></TT>The subnet mask to use for the NAT. DHCP addresses 
      are allocated from this range of addresses. </P><A name=wp1027174></A>
      <P><TT>configport<BR></TT>A port that can be used to access status 
      information about the NAT. </P><A name=wp1100643></A>
      <P><TT>device<BR></TT>The VMnet device to use. Linux devices are of the 
      format <TT>/dev/vmnet&lt;x&gt;</TT>. VMnet8 is the default NAT device. 
      </P><A name=wp1027181></A>
      <P><TT>activeFTP<BR></TT>A flag that indicates if active FTP is to be 
      allowed. Active FTP allows incoming connections to be opened by the remote 
      FTP server. Turning this off means that only passive mode FTP works. Set 
      the flag to <TT>0</TT> to turn active FTP off. </P><A name=wp1027186></A>
      <H3>The [udp] Section </H3><A name=wp1027188></A>
      <P><TT>timeout<BR></TT>The number of minutes to keep the UDP mapping for 
      the NAT. </P><A name=wp1036093></A>
      <H3>The [incomingtcp] Section </H3><A name=wp1027221></A>
      <P>Use this section to configure TCP port forwarding for NAT. You can 
      assign a port number to an IP address and port number on a virtual 
      machine. </P><A name=wp1028182></A>
      <P>The following line shows the format used in this section. </P><A 
      name=wp1027225></A>
      <P style="MARGIN-LEFT: 19pt"><TT>8887 = 192.168.27.128:21</TT> </P><A 
      name=wp1027227></A>
      <P>This example creates a mapping from port 8887 on the host to the IP 
      address 192.168.27.128 and port 21. When this mapping is set and an 
      external machine connects to the host at port 8887, the network packets 
      are automatically forwarded to port 21 (the standard port for FTP) on the 
      virtual machine with IP address 192.168.27.128. </P><A name=wp1036116></A>
      <H3>The [incomingudp] Section </H3><A name=wp1036128></A>
      <P>Use this section to configure UDP port forwarding for NAT. You can 
      assign a port number to an IP address and port number on a virtual 
      machine. </P><A name=wp1036129></A>
      <P>The following line shows the format used in this section. It 
      illustrates a way to forward X server traffic from the host port 6000 to 
      the virtual machine's port 6001. </P><A name=wp1036118></A>
      <P style="MARGIN-LEFT: 19pt"><TT>6000 = 192.168.27.128:6001</TT> </P><A 
      name=wp1036140></A>
      <P>This example creates a mapping from port 6000 on the host to the IP 
      address 192.168.27.128 and port 6001. When this mapping is set and an 
      external machine connects to the host at port 6000, the network packets 
      are automatically forwarded to port 6001 on the virtual machine with IP 
      address 192.168.27.128. </P>
      <P></P><!-- Bottom Navigation to Previous, Contents, Last, and Next pages --><!-- See also Title paragraph style --><SPAN 
      class=smaller>
      <P><B><A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_extaccess_gsx.html"><IMG 
      height=10 alt=previous 
      src="Advanced NAT Configuration_files/goleft_10.gif" width=10 
      border=0></A>&nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_extaccess_gsx.html">Prev</A>&nbsp; 
      &nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/index_vm.html">Contents</A>&nbsp; 
      &nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/glossary_vm_gsx.html">Last</A>&nbsp; 
      &nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_custom_gsx.html">Next</A>&nbsp;<A 
      href="http://www.vmware.com/support/gsx3/doc/network_nat_custom_gsx.html"><IMG 
      height=10 alt=next src="Advanced NAT Configuration_files/goright_10.gif" 
      width=10 border=0></A></B></P></SPAN></TD></TR>
  <TR></TR></TBODY></TABLE></DIV>
<DIV id=ibreadcrumbs><A href="http://www.vmware.com/support/">Support</A> &gt; 
<A href="http://www.vmware.com/support/resources/">Support Resources</A> &gt; <A 
href="http://www.vmware.com/support/pubs/">Documentation</A> </DIV></DIV>
<DIV id=content-right>
<UL id=secondary-navigation>
  <LI class=first><A href="http://www.vmware.com/support/resources/">Support 
  Resources</A> 
  <UL>
    <LI class=first><A href="http://kb.vmware.com/">Knowledge Base</A> </LI>
    <LI><A href="http://www.vmware.com/support/tools/">Support Tools</A> </LI>
    <LI><A href="http://www.vmware.com/security/">Security Center</A> </LI>
    <LI><A href="http://www.vmware.com/support/pubs/">Documentation</A> 
    <UL>
      <LI><A href="http://www.vmware.com/support/pubs/vs_pubs.html">VMware 
      vSphere 4</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/vi_pubs.html">VMware 
      Infrastructure 3</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/sdk_pubs.html">VMware SDK 
      &amp; API</A> </LI>
      <LI><A 
      href="http://www.vmware.com/support/pubs/labmanager_pubs.html">vCenter Lab 
      Manager</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/lcm_pubs.html">vCenter 
      Lifecycle Manager</A> </LI>
      <LI><A 
      href="http://www.vmware.com/support/pubs/stagemanager_pubs.html">vCenter 
      Stage Manager</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/srm_pubs.html">vCenter 
      Site Recovery Manager</A> </LI>
      <LI><A 
      href="http://www.vmware.com/support/pubs/appspeed_pubs.html">vCenter 
      AppSpeed</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/vcbm_pubs.html">vCenter 
      Chargeback</A> </LI>
      <LI><A 
      href="http://www.vmware.com/support/pubs/heartbeat_pubs.html">vCenter 
      Server Heartbeat</A> </LI>
      <LI><A 
      href="http://www.vmware.com/support/pubs/converter_pubs.html">vCenter 
      Converter Standalone</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/vdr_pubs.html">VMware Data 
      Recovery</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/vsz_pubs.html">VMware 
      vShield Zones</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/server_pubs.html">VMware 
      Server</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/view_pubs.html">VMware 
      View</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/vdi_pubs.html">VMware 
      VDI</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/thinapp_pubs.html">VMware 
      ThinApp</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/ace_pubs.html">VMware 
      ACE</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/ws_pubs.html">VMware 
      Workstation</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/player_pubs.html">VMware 
      Player</A> </LI>
      <LI><A href="http://www.vmware.com/support/pubs/fusion_pubs.html">VMware 
      Fusion (for the Mac)</A> </LI></UL></LI>
    <LI><A href="http://communities.vmware.com/community/vmtn/">Communities</A> 
    </LI>
    <LI><A href="http://www.vmware.com/support/licensing.html">Product 
    Licensing</A> </LI></UL></LI></UL></DIV></DIV>
<DIV id=top-of-page>
<DIV id=iglobal-sites></DIV>
<DIV id=iprimary-navigation></DIV>
<DIV id=isite-tools></DIV>
<DIV id=ilanguage></DIV>
<DIV id=isearch-form></DIV></DIV>
<DIV id=ifooter></DIV></DIV>
<DIV id=custom-extras></DIV>
<SCRIPT src="Advanced NAT Configuration_files/template" 
type=text/javascript></SCRIPT>

<SCRIPT src="Advanced NAT Configuration_files/baynote.js" 
type=text/javascript></SCRIPT>

<SCRIPT src="Advanced NAT Configuration_files/tracking.js" 
type=text/javascript></SCRIPT>

<SCRIPT src="Advanced NAT Configuration_files/hbx.js" 
type=text/javascript></SCRIPT>

<SCRIPT src="Advanced NAT Configuration_files/elqCfg.js" 
type=text/javascript></SCRIPT>

<SCRIPT src="Advanced NAT Configuration_files/elqImg.js" 
type=text/javascript></SCRIPT>
</TR></TABLE>
<DIV></DIV></BODY></HTML>
